(function(){"use strict";angular.module("seaspongeApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","ui.select","ngDragDrop"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainController"}).when("/about",{templateUrl:"views/about.html",controller:"AboutController"}).when("/draw",{templateUrl:"views/draw.html",controller:"DrawController"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("seaspongeApp").controller("MainController",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this),function(){"use strict";angular.module("seaspongeApp").controller("AboutController",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this),function(){"use strict";angular.module("seaspongeApp").controller("DrawController",["$scope","Stencils",function(a,b){var c;return a.stencils=b,a.menu={stencilsOpen:!0,propertiesOpen:!1},a.selectedStencil=!1,a.codeTypeOptions=["Not selected","Managed","Unmanaged"],a.runningAsOptions=["Kernel","System","Network Service","Local Service","Administrator","Standard User with Elevation","Standard User without Elevation","Windows Store App"],a.acceptsInputOptions=["Not Selected","Any Remote User or Entity","Kernel, System, or Local Admin","Local or Network Service","Local Standard User With Elevation","Local Standard User Without Elevation","Windows Store Apps or App Container Processes","Nothing","Other"],a.container=$(".diagram-contents"),a.dropStencil=this.dropStencil=function(b,c){var d,e,f,g,h,i,j,k;return h=c.draggable,d=$(h),g=d.controller("ngModel"),g?(k=g.$modelValue,i=a.addStencil(k),f=a.container.offset(),j={left:b.pageX-f.left,top:b.pageY-f.top},e=i.$element,e.css(j),a.instance.repaintEverything()):void 0},c=function(a,b,c){var d,e,f;return window.URL=window.URL||window.webkitURL,c=c||"text/plain",a=a||"download",b=b||"",d=new Blob([b],{type:c}),f=window.URL.createObjectURL(d),e=document.createElement("a"),e.download=a,e.href=f,e.click()},a.saveModel=function(){var b,d,e,f,g,h,i,j;return b=$(".stencil",a.container),j=$.map(b,function(a){var b;return b=$(a),b.data("stencil")}),h=function(){var a,b,c;for(c=[],a=0,b=j.length;b>a;a++)i=j[a],c.push(i.serialize());return c}(),f={version:"0.0.0",date:new Date,authors:["Glavin Wiechert"],diagrams:[]},e=f.diagrams,d={id:jsPlumbUtil.uuid(),name:"Diagram 1",elements:h,flows:[],boundaries:[]},e.push(d),console.log("model",f),g=JSON.stringify(f,void 0,4),c("model.sponge",g,"application/json")},jsPlumb.ready(function(){var b,c;a.instance=c=jsPlumb.getInstance({DragOptions:{cursor:"pointer",zIndex:2e3},ConnectionOverlays:[["Arrow",{location:1}],["Label",{location:.1,id:"label",cssClass:"aLabel"}]],Container:"content-right"}),b=function(a){a.getOverlay("label").setLabel(a.sourceId.substring(15)+"-"+a.targetId.substring(15)),a.bind("editCompleted",function(a){"undefined"!=typeof console&&console.log("connection edited. path is now ",a.path)})},c.doWhileSuspended(function(){c.bind("connection",function(a){b(a.connection)}),c.draggable(jsPlumb.getSelector(".diagram-contents .stencil"),{grid:[20,20]}),c.bind("click",function(a){confirm("Delete connection from "+a.sourceId+" to "+a.targetId+"?")&&jsPlumb.detach(a)}),c.bind("connectionDrag",function(a){console.log("connection "+a.id+" is being dragged. suspendedElement is ",a.suspendedElement," of type ",a.suspendedElementType)}),c.bind("connectionDragStop",function(a){console.log("connection "+a.id+" was dragged")}),c.bind("connectionMoved",function(a){console.log("connection "+a.connection.id+" was moved")}),c.bind("contextmenu",function(a,b){console.log("contextmenu: ",a,b)}),a.container.on("stencil-instance-click",function(b,c){return a.$apply(function(){return $(".selected-stencil").removeClass("selected-stencil"),a.selectedStencil===c?(a.selectedStencil=!1,a.menu.propertiesOpen=!1,a.menu.stencilsOpen=!0):(c.$element.addClass("selected-stencil"),a.selectedStencil=c,a.menu.stencilsOpen=!1,a.menu.propertiesOpen=!0)})})})}),a.addStencil=function(b){var c,d,e;return c=a.instance,e=jsPlumbUtil.uuid(),d=new b(e,a.container,c)}}])}.call(this),function(){angular.module("seaspongeApp").factory("Stencils",["BrowserClientStencil","GeneralProcessStencil","KernelThreadStencil","ManagedStencil","NativeStencil","OSProcessStencil","ThickStencil","ThreadStencil","VirtualStencil","WebServerStencil","WebServiceStencil","WebStencil","Win32ServiceStencil","WindowsStoreProcessStencil",function(){return arguments}])}.call(this),function(){angular.module("seaspongeApp").factory("BaseStencil",function(){var a;return a=function(){function a(a,b,c){var d,e;this.uuid=a,this.$container=b,this.plumbInstance=c,this.authenticationScheme={uses:!1,description:null},this.authorizationScheme={uses:!1,description:null},this.communicationProtocol={uses:!1,description:null},this.$element=d=$("<div />",{id:this.uuid}).append($("<p/>").text(""+this.constructor.title+" <"+this.constructor.category+">")),this.$element.data("stencil",this),e=this.constructor.classNames.join(" "),d.addClass(e),this.$container.append(d),this.$element.click(function(a){return function(b){return a.$container.trigger("stencil-instance-click",[a,b])}}(this)),this.plumbInstance.doWhileSuspended(function(a){return function(){var b;return a._addEndpoints(a.plumbInstance,a.uuid,["TopCenter","BottomCenter"],["LeftMiddle","RightMiddle"]),b=jsPlumb.getSelector(".diagram-contents .stencil"),a.plumbInstance.draggable(b,{grid:[20,20]}),a.plumbInstance.repaint()}}(this))}return a.title="Base",a.category="Base",a.anchors=[],a.icon="http://png-5.findicons.com/files/icons/1070/software/128/mozilla_firefox.png",a.classNames=["stencil"],a.shape="rectange",a.prototype.$element=null,a.prototype.tags=[],a.prototype.codeType="Managed",a.prototype.runningAs="Kernel",a.prototype.acceptsInput="Kernel, System, or Local Admin",a.prototype.authenticationScheme=null,a.prototype.authorizationScheme=null,a.prototype.communicationProtocol=null,a.prototype.notes="There is no available notes.",a.prototype._addEndpoints=function(a,b,c,d){var e,f,g,h;for(e=0;e<c.length;)g=b+c[e],a.addEndpoint(""+b,this.sourceEndpoint,{anchor:c[e],uuid:g}),e++;for(f=0;f<d.length;)h=b+d[f],a.addEndpoint(""+b,this.targetEndpoint,{anchor:d[f],uuid:h}),f++},a.prototype.getPosition=function(){return this.$element.position()},a.prototype.serialize=function(){var a;return a={id:this.uuid,name:this.constructor.title,category:this.constructor.category,"class":this.constructor.name,location:this.getPosition(),tags:this.tags,scale:1,attributes:{shape:this.constructor.shape,codeType:this.codeType,runningAs:this.runningAs,acceptsInput:this.acceptsInput,authenticationScheme:this.authenticationScheme,authorizationScheme:this.authorizationScheme,communicationProtocol:this.communicationProtocol}}},a.prototype.sourceEndpoint={endpoint:"Dot",paintStyle:{strokeStyle:"#7AB02C",fillStyle:"transparent",radius:7,lineWidth:3},isSource:!0,connector:["Flowchart",{stub:[40,60],gap:10,cornerRadius:5,alwaysRespectStubs:!0}],connectorStyle:a.connectorPaintStyle,hoverPaintStyle:a.endpointHoverStyle,connectorHoverStyle:a.connectorHoverStyle,dragOptions:{},overlays:[["Label",{location:[.5,1.5],cssClass:"endpointSourceLabel"}]]},a.prototype.targetEndpoint={endpoint:"Dot",paintStyle:{fillStyle:"#7AB02C",radius:11},hoverPaintStyle:a.endpointHoverStyle,maxConnections:-1,dropOptions:{hoverClass:"hover",activeClass:"active"},isTarget:!0,overlays:[["Label",{location:[.5,-.5],cssClass:"endpointTargetLabel"}]]},a.prototype.connectorPaintStyle={lineWidth:4,strokeStyle:"#61B7CF",joinstyle:"round",outlineColor:"white",outlineWidth:2},a.prototype.connectorHoverStyle={lineWidth:4,strokeStyle:"#216477",outlineWidth:2,outlineColor:"white"},a.prototype.endpointHoverStyle={fillStyle:"#216477",strokeStyle:"#216477"},a}()})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("BaseProcessStencil",["BaseStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="Base",c.category="Process",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("GeneralProcessStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="General Process",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("OSProcessStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="OS Process",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("ThreadStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="Thread",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("KernelThreadStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="Kernel Thread",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("NativeStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="Native",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("ManagedStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="Managed",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("ThickStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="Thick",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("BrowserClientStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="Browser Client",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("WebServerStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="Web Server",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("WindowsStoreProcessStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="Windows Store Process",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("WebStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="Web",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("WebServiceStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="Web Service",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("Win32ServiceStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="Win32 Service",c}(a)}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("seaspongeApp").factory("VirtualStencil",["BaseProcessStencil",function(a){var c;return c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.title="Virtual",c}(a)}])}.call(this);